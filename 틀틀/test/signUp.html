<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TravelMaker</title>
    <link rel="shortcut icon" type="image/x-icon" href="image/small_logo.png">
    <link rel="stylesheet" href="signUp.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300&display=swap" rel="stylesheet">
    <script src="https://kit.fontawesome.com/ef988defcf.js" crossorigin="anonymous"></script>

</head>
<body>
    <main>
        <header>
            <section class="head">
                <section id="logo">
                    <a href="#">
                        <img src="image/logo.png" width="100%">
                    </a>
                </section>

                <section></section>

                <section id="search-area">
                    <form action="#" name="search-form">
                        <fieldset>
                            <section>
                                <input type="search" id="query" name="query" autocomplete="off">
                                <button type="submit" id="search-btn" class="fa-solid fa-magnifying-glass"></button>
                            </section>
                        </fieldset>
                    </form>
                </section>
                <section></section>

                <section class="login-area">
                    <button>
                        <a href="#">로그인</a>
                    </button>
                    <button>
                        <a href="#">회원가입</a>
                    </button>
                </section>
            </section>
        </header>

        <nav>
            <section id="nav">
                <section class="nav-menu">
                    <a href="#">지역</a>
                </section>
                <section class="nav-menu">
                    <a href="#">테마</a>
                </section>
                <section class="nav-menu">
                    <a href="#">여행 계획하기</a>
                </section>
                <section class="nav-menu">
                    <a href="#">여행 리뷰</a>
                </section>
            </section>
        </nav>

        <section id="middle">
            

            <section class="right-section">
                <section class="right-section-head">회원가입<hr></section>
                <section class="right-section-area">
                    <form action="#" method="get"  onsubmit="return validate()">
                        <table>

                            
                                
                            <tr>
                                <td><label for="id">아이디</label></td>
                                <td><input type="text" id="id" name="id" placeholder="아이디 입력(소문자영어&숫자6~20글자)" autocomplete='off'></td>
                                <td><button type="button" id="id-check" onclick="fn_check()">중복확인</button></td>
                            </tr>
                          


                            <tr class="idcheck">
                                <td></td>
                                <td><span class="idcheckArea"></span></td>
                                <td></td>
                            </tr>

                            <tr>
                                <td><label for="memberName">이름</label></td>
                                <td><input type="text" id="memberName" name="memberName" placeholder="이름입력(한글2~6글자)" autocomplete='off'></td>

                            </tr>

                            <tr class="idcheck">
                                <td></td>
                                <td><span class="nameText"></span></td>
                                <td></td>

                            </tr>

                            

                            <tr>
                                <td><label for="pw">비밀번호</label></td>
                                <td><input type="password" id="pw" name="pw" placeholder="비밀번호 입력(6~20글자)"></td>
                                
                            </tr>

                            <tr>
                                <td><label for="pw2">비밀번호 확인</label></td>
                                <td><input type="password" id="pw2" name="pw2" placeholder="비밀번호 확인"></td>
                            </tr>

                            <tr class="idcheck">
                                <td></td>
                                <td><span id="pwcheckarea"></span></td>
                            </tr>

                            <tr>
                                <td><label for="nickname">닉네임</label></td>
                                <td id="nickname-td">
                                    <input type="text" name="memberNikcname" id="nickname" placeholder="닉네임 입력(한글 2~8글자)" autocomplete='off'><br>
                                    <span id="nickname-span">　</span>
                                </td>
                                <td><button type="button" id="nickname-check">중복 확인</button></td>
                            </tr>

                            <tr>
                                <td id="profile-td"><label for="profile-btn">프로필 사진</label></td>
                                <td id="profile-area">
                                    <section id="profile">
                                        <section id="image-preview">
                                            <img src="image/profile.png" id="basic-profile">
                                        </section>
                                        <input id="real-upload" type="file" onchange="loadFile(this)" name="profile" accept="image/jpg, image/jpeg, image/png" />
                                        <button type="button" id="profile-btn">사진 업로드</button>
                                    </section>
                                </td>
                            </tr>

                            <tr>
                                <td id="address-td"><label for="address-btn">주소</label></td>
                                <td>
                                    <input type="search" class="address" name="zipcode" placeholder="우편번호" readonly>
                                    <button type="button" id="address-btn">주소 검색</button><br>
                                    <input type="text" class="address" name="address" placeholder="주소" readonly><br>
                                    <input type="text" class="address" name="detail" placeholder="상세 주소" autocomplete='off'>
                                    
                                </td>
                                <td></td>
                            </tr>

                            <tr>
                                <td style="position: relative;bottom: 13px;">선호 테마</td>
                                <td style="padding: 20px 0;">
                                    <label><input type="checkbox" name="theme" value="theme1">테마1</label>
                                    <label><input type="checkbox" name="theme" value="theme2">테마2</label>
                                    <label><input type="checkbox" name="theme" value="theme3">테마3</label>
                                    <label><input type="checkbox" name="theme" value="theme4">테마4</label><br>
                                    <label><input type="checkbox" name="theme" value="theme5">테마5</label>
                                    <label><input type="checkbox" name="theme" value="theme6">테마6</label>
                                    <label><input type="checkbox" name="theme" value="theme7">테마7</label>
                                    <label><input type="checkbox" name="theme" value="theme8">테마8</label>
                                </td>
                            </tr>

                            <tr>
                                <td><label for="pwQuestion">비밀번호 찾기 질문</label></td>
                                <td>
                                    <select name="pw-question" id="pwQuestion">
                                        <option value="basic" selected>질문을 고르세요</option>
                                        <option value="1">기억에 남는 추억의 장소는?</option>
                                        <option value="2">자신의 인생 좌우명은?</option>
                                        <option value="3">가장 기억에 남는 선생님 성함은?</option>
                                        <option value="4">타인은 모르는 자신만의 신체비밀이 있다면?</option>
                                        <option value="5">유년시절 가장 생각나는 친구 이름은?</option>
                                        <option value="6">다시 태어나면 되고 싶은 것은?</option>
                                        <option value="7">인상 깊게 읽은 책 이름은?</option>
                                        <option value="8">자신의 별명이 있다면?</option>
                                        <option value="9">받았던 선물 중 기억에 남는 독특한 선물은?</option>
                                        <option value="10">자신의 보물 제 1호는?</option>
                                    </select>
                            </td>
                            </tr>

                            <tr>
                                <td><label for="pwAnswer">비밀번호 찾기 답변</label></td>
                                <td><input type="text" name="pw-answer" id="pwAnswer" autocomplete='off'></td>
                            </tr>

                            <tr>
                                <td></td>
                                <td class="submit">
                                    <button id="submit-btn" type="submit">회원가입</button>
                                    
                                </td>
                            </tr>
                        </table>
                    </form>
                </section>
            </section>
        </section>

        <footer>
            <section>Copyright © TravelMaker Corp. All rights reserved.</section>
            <section class="footer"> 　　이용약관　　 </section>
            <section class="footer"> 　　운영정책　　 </section>
            <section class="footer"> 　　1:1문의　　 </section>
        </footer>
    </main>



    <!-- script -->
    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <script>
        /* 아이디 유효성 검사 */
        const id = document.getElementById("id");
        const idcheck = document.getElementById("idcheck");

        id.addEventListener("keyup", () => {
            const regExp = /^[a-z][a-z0-9]{5,19}$/;
            const span = document.querySelector(".idcheckArea");

            if(regExp.test(id.value)) {
                span.innerHTML = "적합한 아이디 입니다."
                span.style.color = "green";
                span.style.fontWeight = "bold";

            } else {
                span.innerHTML = "적합하지 않은 아이디입니다."
                span.style.color = "red";
                span.style.fontWeight = "bold";
            }

            if(id.value.length ==1){
                span.innerHTML = "아이디는 1글자 이상 입력하세요"
                span.style.color = "red";
            }

            if(id.value.length == 0){
                span.innerHTML = "　";
            } else if(id.value.length > 20){
                span.innerHTML = "아이디는 20자이내로 입력하세요"
                span.style.color = "red";

            }


        })


        /* 이름 유효성 검사 */

        const memberName = document.getElementById("memberName");

        memberName.addEventListener("keyup" , () => {

            const regExp = /^[가-힣]{2,6}$/
            const span = document.querySelector(".nameText");

            if(regExp.test(memberName.value)) {
                span.innerHTML = "적합한 이름 입니다."
                span.style.color = "green";
                span.style.fontWeight = "bold";

            } else {
                span.innerHTML = "적합하지 않은 이름입니다."
                span.style.color = "red";
                span.style.fontWeight = "bold";
            }

            if(memberName.value.length ==1){
                span.innerHTML = "이름은 1글자 이상 입력하세요"
                span.style.color = "red";
            }

            if(memberName.value.length == 0){
                span.innerHTML = "　";
                
            } else if(memberName.value.length > 6){
                span.innerHTML = "이름은 6자이내로 입력하세요"
                span.style.color = "red";

            } 
            
            

        })




               


        /* 비밀번호 유효성 검사 */
        const pw = document.getElementById("pw");
        const pw2 = document.getElementById("pw2");
        const pwcheck = document.getElementById("pwcheckarea");

        pw.addEventListener("keyup", () => {
            const regExp = /^[A-Za-z0-9`~!@#\$%\^&\*\(\)\{\}\[\]\-_=\+\\|;:'"<>,\./\?]{6,20}$/;
            const span = document.querySelector("#pw-check");
            console.log(pw.value);

            if(regExp.test(pw.value)) {
                pwcheck.innerHTML = "적합한 비밀번호입니다."
                pwcheck.style.color = "green";
                pwcheck.style.fontWeight = "bold";

            } else {
                pwcheck.innerHTML = "적합하지 않은 비밀번호입니다."
                pwcheck.style.color = "red";
                pwcheck.style.fontWeight = "bold";
            }

            

            if(pw.value == "") {
                pwcheck.innerHTML = "　";
            }

        })
        


        /* 닉네임 유효성 검사 */
        const nicknameCheck = document.querySelector("#nickname-check");
        const nickname = document.querySelector("#nickname");
        
        nickname.addEventListener("keyup", () => {
            const regExp = /^[가-힣]{2,8}$/;
            const span = document.querySelector("#nickname-span");
            
            
            if(regExp.test(nickname.value)) {
                console.log(nickname);
                span.innerHTML = "유효한 닉네임 형식입니다.";
                span.style.color = "green";
                span.style.fontWeight = "bold";
                
            } else {
                span.innerHTML = "닉네임 형식이 유효하지 않습니다.";
                span.style.color = "red";
                span.style.fontWeight = "bold";
                
            }
            
            if(nickname.value == "") {
                span.innerHTML = "　";
            }

        })

       


        /* 프로필 사진 업로드 클릭 이벤트 */
        const realUpload = document.querySelector("#real-upload");
        const profileBtn = document.querySelector("#profile-btn");
        const imagePreview = document.querySelector('#image-preview');

        profileBtn.addEventListener("click", () => realUpload.click());

        function loadFile(input) {

            let file = input.files[0];

            /* 새로운 이미지 태그 추가 */
            let newImage = document.createElement("img");
            newImage.setAttribute("class", "img");

            /* 이미지 source 가져오기 */
            newImage.src = URL.createObjectURL(file);

            newImage.style.width = "150px";
            newImage.style.height = "150px";

            // 이미지를 image-preview section에 추가
            if(imagePreview.firstElementChild != null) { /* image-preview에 이미지가 있을 경우 */
                imagePreview.firstElementChild.remove();
            }
            imagePreview.appendChild(newImage);

        }



        /* 주소 검색 버튼 클릭 이벤트 */
        const addressBtn = document.getElementById("address-btn");
        addressBtn.addEventListener("click", function(){
            new daum.Postcode({
                oncomplete: function(data) {
                    
                    let fullAddr = '';
                    let extraAddr = '';

                    if(data.userSelectedType === 'R') {
                        fullAddr = data.roadAddress;
                    } else {
                        fullAddr = data.jibunAddress;
                    }

                    if(data.userSelectedType == 'R') {
                        if(data.bname !== '') {
                            extraAddr += data.bname;
                        }
                        if(data.buildingName !== '') {
                            extraAddr += (extraAddr !== '' ? ', ' + data.buildingName : data.buildingName);
                        }

                        fullAddr += (extraAddr !== '' ? ' (' + extraAddr + ')' : '');
                    }
                    
                    document.getElementsByName("address")[0].value = fullAddr;
                    document.getElementsByName("zipcode")[0].value = data.zonecode;
                }
            }).open();
        })



        /* form 제출 시 */
        function validate() {

            

            // 아이디 체크

            const id = document.getElementById("id");

            if(id.value == 0){

                alert("아이디를 입력해주세요");
                id.focus();
                return false;

            } 

            const memberName = document.getElementById("memberName");

            if(memberName.value == 0){

                alert("이름을 입력해주세요");
                memberName.focus();
                return false;
            }

            // 비밀번호 체크

            const pw = document.getElementById("pw");

            if(pw.value == 0){

               alert("비밀번호를 입력해주세요");
               pw.focus();

               return false;
            }

            // 비밀번호 확인 체크

            const pw2 = document.getElementById("pw2");

            if(pw2.value == 0){

               alert("비밀번호를 입력해주세요");
               pw2.focus();

                return false;
            }
            
            // 닉네임 입력

            const nickname = document.getElementById("nickname");

            if(nickname.value == 0){

                alert("닉네임을 입력해주세요");
                nickname.focus();

                return false;
            }

            // 주소 입력

            const address = document.getElementsByClassName("address");
            
            if(address[0].value == 0 | address[1] == 0){
                alert("주소검색 버튼을 눌러 주소를 입력하세요");
                return false;

            }

            if(address[2].value == 0){

                alert("상세 주소를 입력해주세요");
                address[2].focus();
                return false;
            }

            // 비밀번호 찾기 질문 선택 안했을시 강요

            const pwQuestion = document.getElementById("pwQuestion");

            const pwQuestionNunber = pwQuestion.options[pwQuestion.selectedIndex].value;

            if(pwQuestionNunber == 'basic'){

                alert("비밀번호 찾기 질문을 선택해주세요");
                pwQuestion.focus();
                return false;
            }

            // 비밀번호 찾기 답변 선택 안했을시 강요

            const pwAnswer = document.getElementById("pwAnswer");

            if(pwAnswer.value == 0){

            alert("비밀번호 찾기 답변을 입력해주세요");
            pwAnswer.focus();

            return false;
            }

           
            // 비밀번호 서로 일치 안했을시 가입 못하게 하는구문

            if(pw.value == pw2.value) {
                return true;

            } else {
                alert("비밀번호가 일치하지 않습니다.");
                return false;
            }

            if(!regExp.test(nickname.value)){

            alert("닉네임 형식이 올바르지 않습니다");
            return false;
            }



        }


    </script>
</body>
</html>